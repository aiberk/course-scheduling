{"ast":null,"code":"var _jsxFileName = \"/home/festrella/Documents/web/course-scheduling/frontend/src/block-sched/ImageBlockSched.js\";\nimport React from 'react';\nimport './BlockSched.css';\nimport blocks from './blocks';\nimport blocks_pic from '../img/blocks.png';\nimport mapAreas from './img-areas-map';\nimport ImageMapper from 'react-image-mapper';\nimport { connect } from 'react-redux';\nimport { chosenCourse, removeChosenCourse, addChosenCourse, deleteChosenCourse } from '../redux/actions';\n\nclass ImageBlockSched extends React.Component {\n  constructor(props) {\n    super(props);\n    this.load = this.load.bind(this);\n    this.clicked = this.clicked.bind(this);\n  }\n\n  load() {\n    console.log('Image loaded');\n  }\n\n  findBlockByName(name) {\n    return blocks.filter(item => item.name === name)[0];\n  }\n\n  chooseColor(block) {\n    let color = \"rgba(192,192,192,0.3)\"; // grey opaque\n\n    const id = block.id;\n\n    if (id in this.props.value) {\n      const pref = this.props.value[id];\n\n      switch (pref.preference) {\n        case \"0\":\n          // MUST \n          color = \"rgba(255,0,0,0.3)\"; // red opaque\n\n          break;\n\n        case \"1\": // PREFERRED\n\n        case \"2\":\n        case \"3\":\n          color = \"rgba(255,255,0,0.3)\"; // yellow opaque\n\n          break;\n\n        case \"4\":\n          // NO\n          color = \"rgba(0, 0, 0, 0.5)\"; // black opaque\n\n          break;\n\n        default:\n          // DEFAULT (NOT CHOSEN / IN REVIEW MODE)\n          color = \"rgba(192,192,192,0.3)\";\n        // grey opaque\n      }\n    } else if (!this.props.review && id in this.props.chosen_courses) {\n      color = \"rgba(0,255,0,0.3)\"; // green opaque (CHOSEN - REVIEW MODE)\n    }\n\n    return color;\n  }\n\n  handleClick(course) {\n    console.log(course);\n\n    if (course.id in this.props.value) {\n      // if this block is submitted, delete other ones and choose this block only\n      Object.entries(this.props.chosen_courses).map(arr => arr[1]).forEach(val => this.props.deleteChosenCourse(val.id));\n      this.props.addChosenCourse(course);\n    }\n\n    if (course.id in this.props.chosen_courses) {\n      // if this block is already chosen, remove it\n      this.props.deleteChosenCourse(course.id);\n      this.props.removeChosenCourse();\n    } else if (!this.props.review) {\n      // if this block is not chosen and the page is not in reviewing mode:\n      // delete all chosen submitted blocks\n      Object.entries(this.props.chosen_courses).map(arr => arr[1]).forEach(val => {\n        if (val.id in this.props.value) {\n          this.props.deleteChosenCourse(val.id);\n        }\n      }); // add to the chosen blocks list\n\n      this.props.chosenCourse(course);\n      this.props.addChosenCourse(course);\n    }\n  }\n\n  clicked(area) {\n    console.log(\"You clicked on \".concat(area.name, \"!\"));\n    const blockName = area.name.split(\"-\")[0];\n    const course = this.findBlockByName(blockName);\n    this.handleClick(course);\n  }\n\n  changeBlockColor() {\n    // find the appropriate color for each block and create new MAP areas for ImageMapper\n    const newAreas = mapAreas.map(area => {\n      const blockName = area.name.split(\"-\")[0];\n      const course = this.findBlockByName(blockName);\n      const color = this.chooseColor(course);\n      area.preFillColor = color;\n      return area;\n    });\n    return newAreas;\n  }\n\n  render() {\n    const URL = blocks_pic;\n    const MAP = {\n      name: \"my-map\",\n      areas: this.changeBlockColor()\n    };\n    return React.createElement(\"div\", {\n      className: \"pref_block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(Mapper, {\n      url: URL,\n      map: MAP,\n      load: this.load,\n      clicked: this.clicked,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }));\n  }\n\n}\n\nfunction Mapper(props) {\n  return React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(ImageMapper, {\n    src: props.url,\n    map: props.map,\n    width: 800,\n    imgWidth: 1472,\n    onLoad: props.load,\n    onClick: area => props.clicked(area),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }));\n}\n\nconst mapStateToProps = state => ({\n  chosen: state.chosen,\n  chosen_courses: state.chosen_courses,\n  value: state.value,\n  review: state.review\n});\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    chosenCourse: chosen => {\n      dispatch(chosenCourse(chosen));\n    },\n    removeChosenCourse: () => {\n      dispatch(removeChosenCourse());\n    },\n    addChosenCourse: chosen => {\n      dispatch(addChosenCourse(chosen));\n    },\n    deleteChosenCourse: id => {\n      dispatch(deleteChosenCourse(id));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageBlockSched);","map":{"version":3,"sources":["/home/festrella/Documents/web/course-scheduling/frontend/src/block-sched/ImageBlockSched.js"],"names":["React","blocks","blocks_pic","mapAreas","ImageMapper","connect","chosenCourse","removeChosenCourse","addChosenCourse","deleteChosenCourse","ImageBlockSched","Component","constructor","props","load","bind","clicked","console","log","findBlockByName","name","filter","item","chooseColor","block","color","id","value","pref","preference","review","chosen_courses","handleClick","course","Object","entries","map","arr","forEach","val","area","blockName","split","changeBlockColor","newAreas","preFillColor","render","URL","MAP","areas","Mapper","url","mapStateToProps","state","chosen","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './BlockSched.css';\n\nimport blocks from './blocks';\nimport blocks_pic from '../img/blocks.png';\nimport mapAreas from './img-areas-map';\nimport ImageMapper from 'react-image-mapper';\n\nimport {connect} from 'react-redux';\nimport {chosenCourse, removeChosenCourse, addChosenCourse, deleteChosenCourse} from '../redux/actions';\n\nclass ImageBlockSched extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.load = this.load.bind(this);\n        this.clicked = this.clicked.bind(this);\n    }\n\n    load() {\n        console.log('Image loaded');\n    }\n\n    findBlockByName(name) {\n        return blocks.filter(item => item.name === name)[0];\n    }\n\n    chooseColor(block) {\n        let color = \"rgba(192,192,192,0.3)\"; // grey opaque\n        const id = block.id;\n        \n        if (id in this.props.value) {\n          const pref = this.props.value[id];\n    \n          switch (pref.preference) {\n            case \"0\": // MUST \n                color = \"rgba(255,0,0,0.3)\" // red opaque\n              break;\n            case \"1\": // PREFERRED\n            case \"2\":\n            case \"3\":\n                color = \"rgba(255,255,0,0.3)\" // yellow opaque\n              break;\n    \n            case \"4\": // NO\n                color = \"rgba(0, 0, 0, 0.5)\" // black opaque\n              break;\n    \n            default: // DEFAULT (NOT CHOSEN / IN REVIEW MODE)\n                color = \"rgba(192,192,192,0.3)\"; // grey opaque\n          }\n        } else if (!this.props.review && (id in this.props.chosen_courses)) {\n            color = \"rgba(0,255,0,0.3)\" // green opaque (CHOSEN - REVIEW MODE)\n        }\n        return color;\n    }\n\n    handleClick(course) {\n        console.log(course);\n        if (course.id in this.props.value) {\n            // if this block is submitted, delete other ones and choose this block only\n            Object.entries(this.props.chosen_courses).map(arr => arr[1]).forEach(val => this.props.deleteChosenCourse(val.id));\n            this.props.addChosenCourse(course);\n        }\n        if (course.id in this.props.chosen_courses) {\n            // if this block is already chosen, remove it\n            this.props.deleteChosenCourse(course.id);\n            this.props.removeChosenCourse();\n        } else if (!this.props.review) {\n            // if this block is not chosen and the page is not in reviewing mode:\n            // delete all chosen submitted blocks\n            Object.entries(this.props.chosen_courses).map(arr => arr[1]).forEach(val => {\n              if (val.id in this.props.value) {\n                this.props.deleteChosenCourse(val.id);\n              }\n            });\n            // add to the chosen blocks list\n            this.props.chosenCourse(course);\n            this.props.addChosenCourse(course);\n        }\n    }\n\n\tclicked(area) {\n        console.log(`You clicked on ${area.name}!`);\n        const blockName = area.name.split(\"-\")[0];\n        \n        const course = this.findBlockByName(blockName);\n        this.handleClick(course);\n    }\n\n    changeBlockColor() {\n        // find the appropriate color for each block and create new MAP areas for ImageMapper\n        const newAreas = mapAreas.map(area => {\n            const blockName = area.name.split(\"-\")[0];\n            const course = this.findBlockByName(blockName);\n\n            const color = this.chooseColor(course);\n            area.preFillColor = color;\n            return area;\n        });\n        return newAreas;\n    }\n\n    render() {\n        const URL = blocks_pic;\n        const MAP = {\n          name: \"my-map\",\n          areas: this.changeBlockColor()\n        }\n\n        return (\n            <div className=\"pref_block\">\n                <Mapper url={URL} map={MAP} load={this.load} clicked={this.clicked}/>\n            </div>\n        );\n    }\n}\n\nfunction Mapper(props) {\n    return (\n        <div className=\"container\">\n            <ImageMapper src={props.url} map={props.map} width={800} imgWidth={1472} onLoad={props.load} onClick={area => props.clicked(area)}/>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => ({\n    chosen: state.chosen,\n    chosen_courses: state.chosen_courses,\n    value: state.value,\n    review: state.review,\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    chosenCourse: (chosen) => { dispatch(chosenCourse(chosen)) } ,\n    removeChosenCourse: () => { dispatch(removeChosenCourse()) },\n    addChosenCourse: (chosen) => { dispatch(addChosenCourse(chosen)) },\n    deleteChosenCourse: (id) => { dispatch(deleteChosenCourse(id)) },\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps) (ImageBlockSched);"]},"metadata":{},"sourceType":"module"}